<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketing Hub - ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒã‚§ãƒƒã‚¯</title>
    <style>
        :root {
            --primary: #6366f1;
            --success: #22c55e;
            --warning: #f59e0b;
            --error: #ef4444;
            --bg: #0f172a;
            --card: #1e293b;
            --text: #f8fafc;
            --muted: #94a3b8;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        header {
            text-align: center;
            padding: 40px 0;
            border-bottom: 1px solid #334155;
            margin-bottom: 40px;
        }
        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .subtitle {
            color: var(--muted);
            font-size: 1.1rem;
        }
        .status-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--card);
            border-radius: 8px;
        }
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        .status-dot.success { background: var(--success); }
        .status-dot.warning { background: var(--warning); }
        .status-dot.error { background: var(--error); }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid #334155;
        }
        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #334155;
        }
        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
        }
        .card-badge {
            margin-left: auto;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .badge-success { background: rgba(34, 197, 94, 0.2); color: var(--success); }
        .badge-warning { background: rgba(245, 158, 11, 0.2); color: var(--warning); }
        .link-list {
            list-style: none;
        }
        .link-list li {
            margin-bottom: 8px;
        }
        .link-list a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background: rgba(99, 102, 241, 0.1);
            border-radius: 8px;
            color: var(--text);
            text-decoration: none;
            transition: all 0.2s;
        }
        .link-list a:hover {
            background: rgba(99, 102, 241, 0.2);
            transform: translateX(5px);
        }
        .link-list .method {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .method-get { background: #22c55e; color: white; }
        .method-post { background: #3b82f6; color: white; }
        .method-patch { background: #f59e0b; color: white; }
        .method-put { background: #8b5cf6; color: white; }
        .method-page { background: #6366f1; color: white; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #334155;
        }
        th {
            color: var(--muted);
            font-weight: 500;
            font-size: 0.85rem;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        .feature-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            font-size: 0.9rem;
        }
        .check { color: var(--success); }
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
        }
        .code-block {
            background: #0d1117;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 15px 0;
        }
        .api-test-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .api-test-btn:hover {
            background: #4f46e5;
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.85rem;
            display: none;
        }
        .test-result.success { background: rgba(34, 197, 94, 0.2); display: block; }
        .test-result.error { background: rgba(239, 68, 68, 0.2); display: block; }
        footer {
            text-align: center;
            padding: 40px 0;
            color: var(--muted);
            border-top: 1px solid #334155;
            margin-top: 40px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        .stat-card {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stat-label {
            color: var(--muted);
            font-size: 0.85rem;
            margin-top: 5px;
        }
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Marketing Hub</h1>
            <p class="subtitle">AIé§†å‹•å‹çµ±åˆãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ - ã‚·ã‚¹ãƒ†ãƒ ãƒã‚§ãƒƒã‚¯</p>
            <div class="status-bar">
                <div class="status-item">
                    <span class="status-dot success"></span>
                    <span>ãƒ“ãƒ«ãƒ‰: æˆåŠŸ</span>
                </div>
                <div class="status-item">
                    <span class="status-dot success"></span>
                    <span>Prisma: æœ‰åŠ¹</span>
                </div>
                <div class="status-item">
                    <span class="status-dot success"></span>
                    <span>API: ç¨¼åƒä¸­</span>
                </div>
                <div class="status-item">
                    <span class="status-dot success"></span>
                    <span>TypeScript: ã‚¨ãƒ©ãƒ¼ãªã—</span>
                </div>
            </div>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">44</div>
                <div class="stat-label">ãƒšãƒ¼ã‚¸/ãƒ«ãƒ¼ãƒˆ</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">40+</div>
                <div class="stat-label">DBãƒ¢ãƒ‡ãƒ«</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">11</div>
                <div class="stat-label">AIãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">15</div>
                <div class="stat-label">ãƒˆãƒªã‚¬ãƒ¼ã‚¿ã‚¤ãƒ—</div>
            </div>
        </div>

        <h2 class="section-title">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸</h2>
        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(99, 102, 241, 0.2);">ğŸ“Š</div>
                    <span class="card-title">ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½</span>
                    <span class="card-badge badge-success">ç¨¼åƒä¸­</span>
                </div>
                <ul class="link-list">
                    <li><a href="/dashboard"><span class="method method-page">PAGE</span> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a></li>
                    <li><a href="/contacts"><span class="method method-page">PAGE</span> ã‚³ãƒ³ã‚¿ã‚¯ãƒˆç®¡ç†</a></li>
                    <li><a href="/campaigns"><span class="method method-page">PAGE</span> ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³</a></li>
                    <li><a href="/funnels"><span class="method method-page">PAGE</span> ãƒ•ã‚¡ãƒãƒ«</a></li>
                    <li><a href="/products"><span class="method method-page">PAGE</span> å•†å“ç®¡ç†</a></li>
                    <li><a href="/orders"><span class="method method-page">PAGE</span> æ³¨æ–‡ç®¡ç†</a></li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(139, 92, 246, 0.2);">ğŸ¤–</div>
                    <span class="card-title">AIæ©Ÿèƒ½</span>
                    <span class="card-badge badge-success">ç¨¼åƒä¸­</span>
                </div>
                <ul class="link-list">
                    <li><a href="/ai/autopilot"><span class="method method-page">PAGE</span> ã‚ªãƒ¼ãƒˆãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ</a></li>
                    <li><a href="/ai/content"><span class="method method-page">PAGE</span> ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ</a></li>
                    <li><a href="/ai/predictions"><span class="method method-page">PAGE</span> äºˆæ¸¬åˆ†æ</a></li>
                    <li><a href="/automation/intent"><span class="method method-page">PAGE</span> è³¼è²·æ„å›³åˆ†æ</a></li>
                    <li><a href="/automation/sentiment"><span class="method method-page">PAGE</span> æ„Ÿæƒ…åˆ†æ</a></li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(34, 197, 94, 0.2);">ğŸ“ˆ</div>
                    <span class="card-title">åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ</span>
                    <span class="card-badge badge-success">ç¨¼åƒä¸­</span>
                </div>
                <ul class="link-list">
                    <li><a href="/analytics"><span class="method method-page">PAGE</span> ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹</a></li>
                    <li><a href="/analytics/scores"><span class="method method-page">PAGE</span> ã‚¹ã‚³ã‚¢åˆ†æ</a></li>
                    <li><a href="/analytics/send-times"><span class="method method-page">PAGE</span> é€ä¿¡æ™‚åˆ»æœ€é©åŒ–</a></li>
                    <li><a href="/segments"><span class="method method-page">PAGE</span> ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ</a></li>
                    <li><a href="/tags"><span class="method method-page">PAGE</span> ã‚¿ã‚°ç®¡ç†</a></li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(245, 158, 11, 0.2);">ğŸ“</div>
                    <span class="card-title">ä¼šå“¡ãƒ»ã‚³ãƒ¼ã‚¹</span>
                    <span class="card-badge badge-success">ç¨¼åƒä¸­</span>
                </div>
                <ul class="link-list">
                    <li><a href="/courses"><span class="method method-page">PAGE</span> ã‚³ãƒ¼ã‚¹ç®¡ç†</a></li>
                    <li><a href="/webinar"><span class="method method-page">PAGE</span> ã‚¦ã‚§ãƒ“ãƒŠãƒ¼</a></li>
                    <li><a href="/events"><span class="method method-page">PAGE</span> ã‚¤ãƒ™ãƒ³ãƒˆ</a></li>
                    <li><a href="/chat"><span class="method method-page">PAGE</span> ãƒãƒ£ãƒƒãƒˆ</a></li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(236, 72, 153, 0.2);">âš™ï¸</div>
                    <span class="card-title">è¨­å®š</span>
                    <span class="card-badge badge-success">ç¨¼åƒä¸­</span>
                </div>
                <ul class="link-list">
                    <li><a href="/settings/email"><span class="method method-page">PAGE</span> ãƒ¡ãƒ¼ãƒ«è¨­å®š</a></li>
                    <li><a href="/settings/line"><span class="method method-page">PAGE</span> LINEè¨­å®š</a></li>
                    <li><a href="/settings/payments"><span class="method method-page">PAGE</span> æ±ºæ¸ˆè¨­å®š</a></li>
                    <li><a href="/settings/bot"><span class="method method-page">PAGE</span> Botè¨­å®š</a></li>
                    <li><a href="/settings/ai"><span class="method method-page">PAGE</span> AIè¨­å®š</a></li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(59, 130, 246, 0.2);">ğŸ”„</div>
                    <span class="card-title">ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</span>
                    <span class="card-badge badge-success">ç¨¼åƒä¸­</span>
                </div>
                <ul class="link-list">
                    <li><a href="/automation"><span class="method method-page">PAGE</span> ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</a></li>
                    <li><a href="/automation/journeys"><span class="method method-page">PAGE</span> ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼</a></li>
                    <li><a href="/automation/ab-tests"><span class="method method-page">PAGE</span> A/Bãƒ†ã‚¹ãƒˆ</a></li>
                </ul>
            </div>
        </div>

        <h2 class="section-title">ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆAPI</h2>
        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(34, 197, 94, 0.2);">ğŸ‘¥</div>
                    <span class="card-title">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç®¡ç†</span>
                    <span class="card-badge badge-success">å®Ÿè£…æ¸ˆ</span>
                </div>
                <ul class="link-list">
                    <li><a href="/api/affiliate/partners?tenantId=test" target="_blank"><span class="method method-get">GET</span> ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ä¸€è¦§</a></li>
                    <li><a href="#" onclick="testApi('/api/affiliate/partners', 'POST'); return false;"><span class="method method-post">POST</span> ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç™»éŒ²</a></li>
                    <li><a href="#" onclick="testApi('/api/affiliate/partners', 'PATCH'); return false;"><span class="method method-patch">PATCH</span> ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ‰¿èª</a></li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(59, 130, 246, 0.2);">ğŸ”—</div>
                    <span class="card-title">ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</span>
                    <span class="card-badge badge-success">å®Ÿè£…æ¸ˆ</span>
                </div>
                <ul class="link-list">
                    <li><a href="/api/affiliate/track?action=getClickId" target="_blank"><span class="method method-get">GET</span> ã‚¯ãƒªãƒƒã‚¯IDå–å¾—</a></li>
                    <li><a href="#" onclick="testApi('/api/affiliate/track', 'POST'); return false;"><span class="method method-post">POST</span> ãƒªãƒ³ã‚¯ä½œæˆ</a></li>
                    <li><a href="#" onclick="testApi('/api/affiliate/track', 'PUT'); return false;"><span class="method method-put">PUT</span> ãƒªãƒ³ã‚¯ä¸€è¦§</a></li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(139, 92, 246, 0.2);">ğŸ¯</div>
                    <span class="card-title">ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³</span>
                    <span class="card-badge badge-success">å®Ÿè£…æ¸ˆ</span>
                </div>
                <ul class="link-list">
                    <li><a href="/api/affiliate/conversions?tenantId=test" target="_blank"><span class="method method-get">GET</span> ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸€è¦§</a></li>
                    <li><a href="#" onclick="testApi('/api/affiliate/conversions', 'POST'); return false;"><span class="method method-post">POST</span> ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¨˜éŒ²</a></li>
                    <li><a href="#" onclick="testApi('/api/affiliate/conversions', 'PATCH'); return false;"><span class="method method-patch">PATCH</span> æ‰¿èª/å´ä¸‹</a></li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(245, 158, 11, 0.2);">ğŸ’°</div>
                    <span class="card-title">ã‚³ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ»æ”¯æ‰•ã„</span>
                    <span class="card-badge badge-success">å®Ÿè£…æ¸ˆ</span>
                </div>
                <ul class="link-list">
                    <li><a href="/api/affiliate/commissions?tenantId=test" target="_blank"><span class="method method-get">GET</span> ã‚³ãƒŸãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§</a></li>
                    <li><a href="/api/affiliate/payouts?tenantId=test" target="_blank"><span class="method method-get">GET</span> æ”¯æ‰•ã„ä¸€è¦§</a></li>
                    <li><a href="#" onclick="testApi('/api/affiliate/payouts', 'POST'); return false;"><span class="method method-post">POST</span> æ”¯æ‰•ã„ä½œæˆ</a></li>
                    <li><a href="#" onclick="testApi('/api/affiliate/payouts', 'PUT'); return false;"><span class="method method-put">PUT</span> ä¸€æ‹¬æ”¯æ‰•ã„</a></li>
                </ul>
            </div>
        </div>

        <h2 class="section-title">Webhook API</h2>
        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(34, 197, 94, 0.2);">ğŸ“±</div>
                    <span class="card-title">LINE Webhook</span>
                    <span class="card-badge badge-success">å®Ÿè£…æ¸ˆ</span>
                </div>
                <div class="code-block">
POST /api/webhooks/line?tenant={tenantId}

ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†:
- follow: å‹ã ã¡è¿½åŠ  â†’ ã‚³ãƒ³ã‚¿ã‚¯ãƒˆä½œæˆ + ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆè¿½è·¡
- unfollow: ãƒ–ãƒ­ãƒƒã‚¯ â†’ ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆæ›´æ–°
- message: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ â†’ ç´¹ä»‹ã‚³ãƒ¼ãƒ‰å‡¦ç†
- postback: ãƒã‚¹ãƒˆãƒãƒƒã‚¯ â†’ ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆè¿½è·¡
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(99, 102, 241, 0.2);">ğŸ’³</div>
                    <span class="card-title">Stripe Webhook</span>
                    <span class="card-badge badge-success">å®Ÿè£…æ¸ˆ</span>
                </div>
                <div class="code-block">
POST /api/webhooks/stripe

ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†:
- checkout.session.completed â†’ æ³¨æ–‡å®Œäº† + ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆå ±é…¬
- payment_intent.succeeded â†’ æ”¯æ‰•ã„æˆåŠŸ
- payment_intent.payment_failed â†’ æ”¯æ‰•ã„å¤±æ•—
- customer.subscription.* â†’ ã‚µãƒ–ã‚¹ã‚¯æ›´æ–°
- invoice.payment_failed â†’ è«‹æ±‚å¤±æ•—
                </div>
            </div>
        </div>

        <h2 class="section-title">çµ±åˆã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ä¸€è¦§</h2>
        <div class="card">
            <table>
                <thead>
                    <tr>
                        <th>ã‚«ãƒ†ã‚´ãƒª</th>
                        <th>æ©Ÿèƒ½</th>
                        <th>Lã‚¹ãƒ†ãƒƒãƒ—</th>
                        <th>UTAGE</th>
                        <th>Marketing Hub</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="5">LINEé€£æº</td>
                        <td>ã‚¹ãƒ†ãƒƒãƒ—é…ä¿¡</td>
                        <td>â—</td>
                        <td>â—‹</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼</td>
                        <td>â—</td>
                        <td>â—‹</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>è‡ªå‹•å¿œç­”</td>
                        <td>â—</td>
                        <td>â—‹</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>ã‚¿ã‚°ç®¡ç†</td>
                        <td>â—</td>
                        <td>â—‹</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>ã‚»ã‚°ãƒ¡ãƒ³ãƒˆé…ä¿¡</td>
                        <td>â—‹</td>
                        <td>â—‹</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td rowspan="4">ãƒ¡ãƒ¼ãƒ«</td>
                        <td>ã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒ¼ãƒ«</td>
                        <td>â–³</td>
                        <td>â—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>ä¸€æ–‰é…ä¿¡</td>
                        <td>â–³</td>
                        <td>â—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>é€ä¿¡æ™‚åˆ»æœ€é©åŒ–</td>
                        <td>Ã—</td>
                        <td>Ã—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>A/Bãƒ†ã‚¹ãƒˆ</td>
                        <td>Ã—</td>
                        <td>â—‹</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td rowspan="3">ãƒ•ã‚¡ãƒãƒ«</td>
                        <td>LPä½œæˆ</td>
                        <td>Ã—</td>
                        <td>â—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>ãƒ•ã‚©ãƒ¼ãƒ </td>
                        <td>â—‹</td>
                        <td>â—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—</td>
                        <td>Ã—</td>
                        <td>â—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td rowspan="4">ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆ</td>
                        <td>ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç®¡ç†</td>
                        <td>â–³</td>
                        <td>â—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>2ãƒ†ã‚£ã‚¢å ±é…¬</td>
                        <td>Ã—</td>
                        <td>â—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>ã‚ªãƒ—ãƒˆã‚¤ãƒ³å ±é…¬</td>
                        <td>Ã—</td>
                        <td>â—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>ä¸æ­£æ¤œçŸ¥</td>
                        <td>Ã—</td>
                        <td>â—‹</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td rowspan="4">AIæ©Ÿèƒ½</td>
                        <td>æ„Ÿæƒ…åˆ†æ</td>
                        <td>Ã—</td>
                        <td>Ã—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>è³¼è²·æ„å›³åˆ†æ</td>
                        <td>Ã—</td>
                        <td>Ã—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>äºˆæ¸¬ã‚¨ãƒ³ã‚¸ãƒ³</td>
                        <td>Ã—</td>
                        <td>Ã—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>ã‚ªãƒ¼ãƒˆãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ</td>
                        <td>Ã—</td>
                        <td>Ã—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td rowspan="3">ä¼šå“¡ã‚µã‚¤ãƒˆ</td>
                        <td>ã‚³ãƒ¼ã‚¹ç®¡ç†</td>
                        <td>Ã—</td>
                        <td>â—</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>å‹•ç”»ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°</td>
                        <td>Ã—</td>
                        <td>â—‹</td>
                        <td>â—</td>
                    </tr>
                    <tr>
                        <td>é€²æ—ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</td>
                        <td>Ã—</td>
                        <td>â—‹</td>
                        <td>â—</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h2 class="section-title">ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆå ±é…¬ãƒ•ãƒ­ãƒ¼</h2>
        <div class="card">
            <div class="code-block">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆå ±é…¬ãƒ•ãƒ­ãƒ¼                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ã‚¯ãƒªãƒƒã‚¯è¿½è·¡
   ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ /r/[code] â†’ ã‚¯ãƒªãƒƒã‚¯è¨˜éŒ² â†’ Cookieä¿å­˜(30æ—¥)
                              â†“
                        AffiliateClickä½œæˆ
                              â†“
                        Partner.totalClicks++

2. LINEå‹ã ã¡è¿½åŠ ï¼ˆã‚ªãƒ—ãƒˆã‚¤ãƒ³å ±é…¬ï¼‰
   å‹ã ã¡è¿½åŠ  â†’ LINE Webhook â†’ Contactä½œæˆ â†’ ç´¹ä»‹è€…ç´ä»˜ã‘
                                    â†“
                           processLineOptin()
                                    â†“
                        AffiliateConversionä½œæˆ
                                    â†“
                        AffiliateCommissionä½œæˆ
                        (ä¾‹: 500å††å›ºå®šå ±é…¬)
                                    â†“
                        Partner.unpaidEarnings++

3. å•†å“è³¼å…¥ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å ±é…¬ï¼‰
   è³¼å…¥å®Œäº† â†’ Stripe Webhook â†’ Orderæ›´æ–° â†’ processPurchase()
                                               â†“
                              Contact.referredByPartnerIdç¢ºèª
                                               â†“
                              AffiliateConversionä½œæˆ
                                               â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â†“                                 â†“
                        Tier 1 å ±é…¬                       Tier 2 å ±é…¬
                    (ç›´æ¥ç´¹ä»‹è€…: 20%)               (ç´¹ä»‹è€…ã®ç´¹ä»‹è€…: 10%)
                              â†“                                 â†“
                  AffiliateCommission             AffiliateCommission
                  (ä¾‹: 20,000å††)                 (ä¾‹: 2,000å††)

4. æ”¯æ‰•ã„å‡¦ç†
   30æ—¥å¾Œ â†’ ã‚¯ãƒ¼ãƒªãƒ³ã‚°ã‚ªãƒ•æœŸé–“çµ‚äº† â†’ æ‰¿èª â†’ AffiliatePayoutä½œæˆ
                                              â†“
                                     éŠ€è¡ŒæŒ¯è¾¼ or PayPal
            </div>
        </div>

        <h2 class="section-title">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ï¼ˆä¸»è¦ï¼‰</h2>
        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(34, 197, 94, 0.2);">ğŸ‘¤</div>
                    <span class="card-title">Partner</span>
                </div>
                <div class="code-block">
- id: String (CUID)
- tenantId: String
- email: String
- name: String
- code: String (unique)
- parentPartnerId: String? (2ãƒ†ã‚£ã‚¢)
- rank: STANDARD|SILVER|GOLD|PLATINUM|VIP
- defaultOptinCommission: Int (500)
- defaultFrontendCommission: Int (30%)
- defaultBackendCommission: Int (20%)
- tier2CommissionRate: Int (10%)
- minimumPayoutAmount: Int (5000)
- bankName, bankBranch, etc.
- totalClicks, totalConversions
- totalEarnings, unpaidEarnings
- status: PENDING|ACTIVE|SUSPENDED|REJECTED
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(59, 130, 246, 0.2);">ğŸ”—</div>
                    <span class="card-title">AffiliateLink</span>
                </div>
                <div class="code-block">
- id: String
- partnerId: String
- code: String (unique, çŸ­ç¸®ã‚³ãƒ¼ãƒ‰)
- targetUrl: String
- name: String?
- customParams: Json?
- clickCount: Int
- conversionCount: Int
- isActive: Boolean
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(139, 92, 246, 0.2);">ğŸ–±ï¸</div>
                    <span class="card-title">AffiliateClick</span>
                </div>
                <div class="code-block">
- id: String
- affiliateLinkId: String
- partnerId: String
- clickId: String (unique, S2Sç”¨)
- ipAddress, userAgent, referer
- deviceType, browser, os
- country, region
- fingerprint (ä¸æ­£æ¤œçŸ¥)
- pendingLineUserId (LIFFç”¨)
- metadata: Json?
- clickedAt: DateTime
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(245, 158, 11, 0.2);">ğŸ¯</div>
                    <span class="card-title">AffiliateConversion</span>
                </div>
                <div class="code-block">
- id: String
- tenantId: String
- partnerId: String
- affiliateLinkId: String?
- clickId: String?
- offerId: String?
- type: LINE_OPTIN|EMAIL_OPTIN|
        FRONTEND_PURCHASE|BACKEND_PURCHASE
- contactId: String?
- orderId: String?
- amount: Int?
- status: PENDING|APPROVED|REJECTED|CANCELLED
- isFraudSuspect: Boolean
- fraudScore: Int?
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(236, 72, 153, 0.2);">ğŸ’°</div>
                    <span class="card-title">AffiliateCommission</span>
                </div>
                <div class="code-block">
- id: String
- tenantId: String
- partnerId: String
- conversionId: String
- type: OPTIN|FRONTEND|BACKEND|TIER2
- amount: Int
- rate: Int? (%)
- baseAmount: Int?
- tier: Int (1=ç›´æ¥, 2=2ãƒ†ã‚£ã‚¢)
- sourcePartnerId: String? (2ãƒ†ã‚£ã‚¢å…ƒ)
- status: PENDING|APPROVED|PAID|CANCELLED
- payoutId: String?
- payableAt: DateTime? (ã‚¯ãƒ¼ãƒªãƒ³ã‚°ã‚ªãƒ•å¾Œ)
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon" style="background: rgba(99, 102, 241, 0.2);">ğŸ’¸</div>
                    <span class="card-title">AffiliatePayout</span>
                </div>
                <div class="code-block">
- id: String
- tenantId: String
- partnerId: String
- amount: Int
- currency: String (JPY)
- method: BANK_TRANSFER|PAYPAL
- status: PENDING|PROCESSING|COMPLETED|FAILED
- periodStart: DateTime
- periodEnd: DateTime
- processedAt: DateTime?
- transactionId: String?
- note: String?
                </div>
            </div>
        </div>

        <footer>
            <p>Marketing Hub v2.0.0 | ãƒ“ãƒ«ãƒ‰æ—¥æ™‚: 2026-02-01</p>
            <p style="margin-top: 10px;">
                <a href="/docs/REQUIREMENTS.md" style="color: var(--primary);">è¦ä»¶å®šç¾©æ›¸ã‚’è¦‹ã‚‹</a>
            </p>
        </footer>
    </div>

    <script>
        async function testApi(endpoint, method) {
            try {
                const response = await fetch(endpoint, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: method !== 'GET' ? JSON.stringify({ tenantId: 'test' }) : undefined
                });
                const data = await response.json();
                alert(`${method} ${endpoint}\n\nStatus: ${response.status}\n\nResponse:\n${JSON.stringify(data, null, 2).slice(0, 500)}`);
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«APIã®çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('Marketing Hub System Check loaded');
        });
    </script>
</body>
</html>
